<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="orderlist">

	<select id="selectAll" resultType="jcappy.orderlist.OrderlistVo" parameterType="jcappy.orderlist.OrderlistVo">
		SELECT ol.*, 
			p.pimg1_org AS pimg1_org, 
			ol.ol_count * ol.ol_price AS total_price
		FROM orderlist ol
		JOIN product p ON ol.pno=p.pno
		<if test="ono != null">
			WHERE ol.ono = #{ono}
		</if>
	</select>
	
	<insert id="insert" parameterType="jcappy.orderlist.OrderlistVo">
		INSERT INTO orderlist (ono, pno, ol_count, ol_price, ol_pname)
		VALUES (#{ono}, #{pno}, #{ol_count}, #{ol_price}, #{ol_pname})
	</insert>
	
</mapper>